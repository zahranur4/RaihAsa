document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("toggleSidebar"),i=document.querySelector(".sidebar"),l=document.querySelector(".main-content"),o=document.querySelector(".search-bar input");e&&e.addEventListener("click",function(){i.classList.toggle("collapsed"),l.classList.toggle("expanded"),window.innerWidth<=768&&i.classList.toggle("active")}),document.addEventListener("click",function(t){const n=document.querySelector(".admin-profile");if(n&&!n.contains(t.target)){const a=document.getElementById("profileMenu");a&&a.classList.remove("show")}window.innerWidth<=768&&i&&!i.contains(t.target)&&!e.contains(t.target)&&i.classList.remove("active")}),o&&o.addEventListener("keyup",function(t){if(t.key==="Enter"){const n=this.value;console.log("Mencari:",n),alert("Mencari: "+n)}});const r=document.getElementById("resetFilter"),s=document.getElementById("applyFilter");r&&r.addEventListener("click",function(){const t=document.querySelectorAll(".filter-bar select"),n=document.querySelectorAll(".filter-bar input");t.forEach(a=>a.selectedIndex=0),n.forEach(a=>a.value=""),alert("Filter telah direset")}),s&&s.addEventListener("click",function(){alert("Filter diterapkan")}),d()});function d(){const e=window.location.pathname;(e.includes("/admin")||e.includes("/admin/dashboard")||e.includes("/admin/laporan"))&&(c(),u()),e.includes("/admin/laporan")&&(g(),p())}function c(){const e=document.getElementById("donationTrendChart");e&&new Chart(e.getContext("2d"),{type:"line",data:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],datasets:[{label:"Jumlah Donasi",data:[65,78,90,81,96,115],borderColor:"#000957",backgroundColor:"rgba(0, 9, 87, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})}function u(){const e=document.getElementById("donationCategoryChart");e&&new Chart(e.getContext("2d"),{type:"doughnut",data:{labels:["Makanan","Barang"],datasets:[{data:[300,150],backgroundColor:["#000957","#17a2b8"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})}function g(){const e=document.getElementById("foodRescueTrendChart");e&&new Chart(e.getContext("2d"),{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","Mei","Jun"],datasets:[{label:"Makanan Terselamatkan (kg)",data:[320,402,378,451,512,489],backgroundColor:"rgba(0, 9, 87, 0.7)",borderColor:"#000957",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}function p(){const e=document.getElementById("volunteerActivityChart");e&&new Chart(e.getContext("2d"),{type:"pie",data:{labels:["Edukasi","Distribusi","Pengumpulan","Administrasi"],datasets:[{data:[30,25,20,25],backgroundColor:["#000957","#17a2b8","#28a745","#ffc107"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})}
